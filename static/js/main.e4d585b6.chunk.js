(this["webpackJsonpchit-chat"]=this["webpackJsonpchit-chat"]||[]).push([[0],{40:function(e,t,c){},41:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(31),r=c.n(a),o=(c(40),c(11)),i=(c(41),c(0)),u=function(){return Object(i.jsx)("div",{className:"cover",children:Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"}),Object(i.jsx)("div",{className:"frame"})]})})},l=c(2),j=c.n(l),d=c(21),m=c(9),h=c(13),b=c(3),f=c(5),p=c.n(f),x=(c(62),function(e){var t=e.createRoomFunc,c=e.connectToWebsocketFunc,n=e.logOutFunc,s=e.joinRoomFunc,a=e.roomIDRef;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"pinGeneratorContainer",children:[Object(i.jsx)("div",{className:"logo"}),Object(i.jsx)("div",{className:"title",children:"Chit - Chat"}),Object(i.jsx)("div",{className:"explanation",children:'Press "Create room" to create a new chatroom or enter a room Id press "Join room" to join a room.'}),Object(i.jsx)("button",{className:"button",onClick:function(){t(),c()},children:"Create room"}),Object(i.jsx)("div",{className:"inputFields",children:Object(i.jsxs)("div",{className:"username",children:[Object(i.jsx)("svg",{className:"svg-icon",viewBox:"0 0 20 20",children:Object(i.jsx)("path",{fill:"#fff",fillOpacity:"0.4",d:"M17.659,3.681H8.468c-0.211,0-0.383,0.172-0.383,0.383v2.681H2.341c-0.21,0-0.383,0.172-0.383,0.383v6.126c0,0.211,0.172,0.383,0.383,0.383h1.532v2.298c0,0.566,0.554,0.368,0.653,0.27l2.569-2.567h4.437c0.21,0,0.383-0.172,0.383-0.383v-2.681h1.013l2.546,2.567c0.242,0.249,0.652,0.065,0.652-0.27v-2.298h1.533c0.211,0,0.383-0.172,0.383-0.382V4.063C18.042,3.853,17.87,3.681,17.659,3.681 M11.148,12.87H6.937c-0.102,0-0.199,0.04-0.27,0.113l-2.028,2.025v-1.756c0-0.211-0.172-0.383-0.383-0.383H2.724V7.51h5.361v2.68c0,0.21,0.172,0.382,0.383,0.382h2.68V12.87z M17.276,9.807h-1.533c-0.211,0-0.383,0.172-0.383,0.383v1.755L13.356,9.92c-0.07-0.073-0.169-0.113-0.27-0.113H8.851v-5.36h8.425V9.807z"})}),Object(i.jsx)("input",{type:"username",className:"userInput",placeholder:"Room ID",ref:a})]})}),Object(i.jsx)("button",{className:"button",onClick:function(){s(),c()},children:"Join room"}),Object(i.jsx)("button",{className:"button",onClick:function(){return n()},children:"Log out"})]})})}),v=(c(63),function(e){var t=e.username,c=e.roomId,s=e.messageRef,a=e.sendMessage,r=e.currentDataFunc,o=e.messages,u=e.leaveRoomFunc,l=Object(n.useState)(!0),j=Object(h.a)(l,2),d=j[0],m=j[1];return r(),Object(n.useEffect)((function(){}),[o]),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("section",{className:"glass",children:[Object(i.jsx)("div",{className:"mobileMenu",onClick:function(){m(!d);var e=document.getElementById("dash"),t=document.getElementById("chat");!1===d&&(null===e||(e.style.left="-110%"),null===t||(t.style.right="0")),!0===d&&(null===e||(e.style.left="0"),null===t||(t.style.right="-100%"))},children:d?Object(i.jsx)("svg",{className:"svg-icon openMenu",viewBox:"0 0 20 20",children:Object(i.jsx)("path",{fill:"#fff",d:"M2.25,12.584c-0.713,0-1.292,0.578-1.292,1.291s0.579,1.291,1.292,1.291c0.713,0,1.292-0.578,1.292-1.291S2.963,12.584,2.25,12.584z M2.25,14.307c-0.238,0-0.43-0.193-0.43-0.432s0.192-0.432,0.43-0.432c0.238,0,0.431,0.193,0.431,0.432S2.488,14.307,2.25,14.307z M5.694,6.555H18.61c0.237,0,0.431-0.191,0.431-0.43s-0.193-0.431-0.431-0.431H5.694c-0.238,0-0.43,0.192-0.43,0.431S5.457,6.555,5.694,6.555z M2.25,8.708c-0.713,0-1.292,0.578-1.292,1.291c0,0.715,0.579,1.292,1.292,1.292c0.713,0,1.292-0.577,1.292-1.292C3.542,9.287,2.963,8.708,2.25,8.708z M2.25,10.43c-0.238,0-0.43-0.192-0.43-0.431c0-0.237,0.192-0.43,0.43-0.43c0.238,0,0.431,0.192,0.431,0.43C2.681,10.238,2.488,10.43,2.25,10.43z M18.61,9.57H5.694c-0.238,0-0.43,0.192-0.43,0.43c0,0.238,0.192,0.431,0.43,0.431H18.61c0.237,0,0.431-0.192,0.431-0.431C19.041,9.762,18.848,9.57,18.61,9.57z M18.61,13.443H5.694c-0.238,0-0.43,0.193-0.43,0.432s0.192,0.432,0.43,0.432H18.61c0.237,0,0.431-0.193,0.431-0.432S18.848,13.443,18.61,13.443z M2.25,4.833c-0.713,0-1.292,0.578-1.292,1.292c0,0.713,0.579,1.291,1.292,1.291c0.713,0,1.292-0.578,1.292-1.291C3.542,5.412,2.963,4.833,2.25,4.833z M2.25,6.555c-0.238,0-0.43-0.191-0.43-0.43s0.192-0.431,0.43-0.431c0.238,0,0.431,0.192,0.431,0.431S2.488,6.555,2.25,6.555z"})}):Object(i.jsx)("svg",{className:"svg-icon closeMenu",viewBox:"0 0 20 20",children:Object(i.jsx)("path",{fill:"#fff",d:"M12.71,7.291c-0.15-0.15-0.393-0.15-0.542,0L10,9.458L7.833,7.291c-0.15-0.15-0.392-0.15-0.542,0c-0.149,0.149-0.149,0.392,0,0.541L9.458,10l-2.168,2.167c-0.149,0.15-0.149,0.393,0,0.542c0.15,0.149,0.392,0.149,0.542,0L10,10.542l2.168,2.167c0.149,0.149,0.392,0.149,0.542,0c0.148-0.149,0.148-0.392,0-0.542L10.542,10l2.168-2.168C12.858,7.683,12.858,7.44,12.71,7.291z M10,1.188c-4.867,0-8.812,3.946-8.812,8.812c0,4.867,3.945,8.812,8.812,8.812s8.812-3.945,8.812-8.812C18.812,5.133,14.867,1.188,10,1.188z M10,18.046c-4.444,0-8.046-3.603-8.046-8.046c0-4.444,3.603-8.046,8.046-8.046c4.443,0,8.046,3.602,8.046,8.046C18.046,14.443,14.443,18.046,10,18.046z"})})}),Object(i.jsxs)("div",{id:"dash",className:"dashboard",children:[Object(i.jsx)("div",{className:"userLogo"}),Object(i.jsxs)("h1",{className:"nickname",children:[" Welcome ",t,"!"]}),Object(i.jsxs)("h3",{className:"roomDescription",children:["Room ID: ",c]}),Object(i.jsx)("div",{className:"explanationDashboard",children:"Share this number with your friends to invite them to the conversation."}),Object(i.jsx)("button",{className:"button",onClick:function(){return u()},children:"Leave room"})]}),Object(i.jsxs)("div",{id:"chat",className:"chatSection",children:[Object(i.jsx)("div",{className:"messages",children:o.map((function(e){return Object(i.jsxs)("div",{className:"message ".concat(e.source),children:[Object(i.jsxs)("h4",{className:"user ".concat(e.source),children:[" ",e.user]}),Object(i.jsx)("p",{className:"text",children:e.message})]})}))}),Object(i.jsxs)("div",{className:"textArea",children:[Object(i.jsx)("div",{className:"inputFields inputFieldsTextArea",children:Object(i.jsx)("div",{className:"username usernameTextArea",children:Object(i.jsx)("textarea",{className:"userInput userInputTextArea",placeholder:"Write your message here :)",ref:s})})}),Object(i.jsx)("div",{className:"buttonTextArea",children:Object(i.jsxs)("button",{className:"button btn",onClick:function(){return a()},children:[Object(i.jsx)("svg",{className:"svg-icon btn-svg",viewBox:"0 0 20 20",children:Object(i.jsx)("path",{fill:"#fff",d:"M17.218,2.268L2.477,8.388C2.13,8.535,2.164,9.05,2.542,9.134L9.33,10.67l1.535,6.787c0.083,0.377,0.602,0.415,0.745,0.065l6.123-14.74C17.866,2.46,17.539,2.134,17.218,2.268 M3.92,8.641l11.772-4.89L9.535,9.909L3.92,8.641z M11.358,16.078l-1.268-5.613l6.157-6.157L11.358,16.078z"})}),Object(i.jsx)("p",{className:"btn-text",children:"Send"})]})})]})]})]})})}),O=(c(64),function(e){var t=e.signUpFunc,c=e.usernameRef,n=e.passRef,s=e.passAgainRef;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"pinGeneratorContainer",children:[Object(i.jsx)("div",{className:"logo"}),Object(i.jsx)("div",{className:"title",children:"Chit - Chat"}),Object(i.jsx)("div",{className:"explanation",children:'Enter a nickname and a new password and press "Create an account" to create a new account.'}),Object(i.jsx)("div",{className:"inputFields",children:Object(i.jsxs)("div",{className:"username",children:[Object(i.jsx)("svg",{className:"svg-icon",viewBox:"0 0 20 20",children:Object(i.jsx)("path",{fill:"#fff",fillOpacity:"0.4",d:"M12.443,9.672c0.203-0.496,0.329-1.052,0.329-1.652c0-1.969-1.241-3.565-2.772-3.565S7.228,6.051,7.228,8.02c0,0.599,0.126,1.156,0.33,1.652c-1.379,0.555-2.31,1.553-2.31,2.704c0,1.75,2.128,3.169,4.753,3.169c2.624,0,4.753-1.419,4.753-3.169C14.753,11.225,13.821,10.227,12.443,9.672z M10,5.247c1.094,0,1.98,1.242,1.98,2.773c0,1.531-0.887,2.772-1.98,2.772S8.02,9.551,8.02,8.02C8.02,6.489,8.906,5.247,10,5.247z M10,14.753c-2.187,0-3.96-1.063-3.96-2.377c0-0.854,0.757-1.596,1.885-2.015c0.508,0.745,1.245,1.224,2.076,1.224s1.567-0.479,2.076-1.224c1.127,0.418,1.885,1.162,1.885,2.015C13.961,13.689,12.188,14.753,10,14.753z M10,0.891c-5.031,0-9.109,4.079-9.109,9.109c0,5.031,4.079,9.109,9.109,9.109c5.031,0,9.109-4.078,9.109-9.109C19.109,4.969,15.031,0.891,10,0.891z M10,18.317c-4.593,0-8.317-3.725-8.317-8.317c0-4.593,3.724-8.317,8.317-8.317c4.593,0,8.317,3.724,8.317,8.317C18.317,14.593,14.593,18.317,10,18.317z"})}),Object(i.jsx)("input",{type:"username",className:"userInput",placeholder:"Nickname",ref:c})]})}),Object(i.jsx)("div",{className:"inputFields",children:Object(i.jsxs)("div",{className:"username",children:[Object(i.jsx)("svg",{className:"svg-icon",viewBox:"0 0 20 20",children:Object(i.jsx)("path",{fill:"#fff",fillOpacity:"0.4",d:"M17.308,7.564h-1.993c0-2.929-2.385-5.314-5.314-5.314S4.686,4.635,4.686,7.564H2.693c-0.244,0-0.443,0.2-0.443,0.443v9.3c0,0.243,0.199,0.442,0.443,0.442h14.615c0.243,0,0.442-0.199,0.442-0.442v-9.3C17.75,7.764,17.551,7.564,17.308,7.564 M10,3.136c2.442,0,4.43,1.986,4.43,4.428H5.571C5.571,5.122,7.558,3.136,10,3.136 M16.865,16.864H3.136V8.45h13.729V16.864z M10,10.664c-0.854,0-1.55,0.696-1.55,1.551c0,0.699,0.467,1.292,1.107,1.485v0.95c0,0.243,0.2,0.442,0.443,0.442s0.443-0.199,0.443-0.442V13.7c0.64-0.193,1.106-0.786,1.106-1.485C11.55,11.36,10.854,10.664,10,10.664 M10,12.878c-0.366,0-0.664-0.298-0.664-0.663c0-0.366,0.298-0.665,0.664-0.665c0.365,0,0.664,0.299,0.664,0.665C10.664,12.58,10.365,12.878,10,12.878"})}),Object(i.jsx)("input",{type:"password",className:"userInput",placeholder:"Password",ref:n})]})}),Object(i.jsx)("div",{className:"inputFields",children:Object(i.jsxs)("div",{className:"username",children:[Object(i.jsx)("svg",{className:"svg-icon",viewBox:"0 0 20 20",children:Object(i.jsx)("path",{fill:"#fff",fillOpacity:"0.4",d:"M17.308,7.564h-1.993c0-2.929-2.385-5.314-5.314-5.314S4.686,4.635,4.686,7.564H2.693c-0.244,0-0.443,0.2-0.443,0.443v9.3c0,0.243,0.199,0.442,0.443,0.442h14.615c0.243,0,0.442-0.199,0.442-0.442v-9.3C17.75,7.764,17.551,7.564,17.308,7.564 M10,3.136c2.442,0,4.43,1.986,4.43,4.428H5.571C5.571,5.122,7.558,3.136,10,3.136 M16.865,16.864H3.136V8.45h13.729V16.864z M10,10.664c-0.854,0-1.55,0.696-1.55,1.551c0,0.699,0.467,1.292,1.107,1.485v0.95c0,0.243,0.2,0.442,0.443,0.442s0.443-0.199,0.443-0.442V13.7c0.64-0.193,1.106-0.786,1.106-1.485C11.55,11.36,10.854,10.664,10,10.664 M10,12.878c-0.366,0-0.664-0.298-0.664-0.663c0-0.366,0.298-0.665,0.664-0.665c0.365,0,0.664,0.299,0.664,0.665C10.664,12.58,10.365,12.878,10,12.878"})}),Object(i.jsx)("input",{type:"password",className:"userInput",placeholder:"Confirm password",ref:s})]})}),Object(i.jsx)("button",{className:"button",onClick:function(){return t()},children:"Create an account"}),Object(i.jsxs)("div",{className:"explanation",children:["Already have an account? ",Object(i.jsx)(o.b,{to:"/Chit-Chat/",children:"Log in!"})]})]})})}),g=(c(70),function(e){var t=e.logInFunc,c=e.usernameRef,n=e.passRef;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"pinGeneratorContainer",children:[Object(i.jsx)("div",{className:"logo"}),Object(i.jsx)("div",{className:"title",children:"Chit - Chat"}),Object(i.jsx)("div",{className:"explanation",children:'Enter your nickname and password and press "Log in" to log in the server.'}),Object(i.jsx)("div",{className:"inputFields",children:Object(i.jsxs)("div",{className:"username",children:[Object(i.jsx)("svg",{className:"svg-icon",viewBox:"0 0 20 20",children:Object(i.jsx)("path",{fill:"#fff",fillOpacity:"0.4",d:"M12.443,9.672c0.203-0.496,0.329-1.052,0.329-1.652c0-1.969-1.241-3.565-2.772-3.565S7.228,6.051,7.228,8.02c0,0.599,0.126,1.156,0.33,1.652c-1.379,0.555-2.31,1.553-2.31,2.704c0,1.75,2.128,3.169,4.753,3.169c2.624,0,4.753-1.419,4.753-3.169C14.753,11.225,13.821,10.227,12.443,9.672z M10,5.247c1.094,0,1.98,1.242,1.98,2.773c0,1.531-0.887,2.772-1.98,2.772S8.02,9.551,8.02,8.02C8.02,6.489,8.906,5.247,10,5.247z M10,14.753c-2.187,0-3.96-1.063-3.96-2.377c0-0.854,0.757-1.596,1.885-2.015c0.508,0.745,1.245,1.224,2.076,1.224s1.567-0.479,2.076-1.224c1.127,0.418,1.885,1.162,1.885,2.015C13.961,13.689,12.188,14.753,10,14.753z M10,0.891c-5.031,0-9.109,4.079-9.109,9.109c0,5.031,4.079,9.109,9.109,9.109c5.031,0,9.109-4.078,9.109-9.109C19.109,4.969,15.031,0.891,10,0.891z M10,18.317c-4.593,0-8.317-3.725-8.317-8.317c0-4.593,3.724-8.317,8.317-8.317c4.593,0,8.317,3.724,8.317,8.317C18.317,14.593,14.593,18.317,10,18.317z"})}),Object(i.jsx)("input",{type:"username",className:"userInput",placeholder:"Nickname",ref:c})]})}),Object(i.jsx)("div",{className:"inputFields",children:Object(i.jsxs)("div",{className:"username",children:[Object(i.jsx)("svg",{className:"svg-icon",viewBox:"0 0 20 20",children:Object(i.jsx)("path",{fill:"#fff",fillOpacity:"0.4",d:"M17.308,7.564h-1.993c0-2.929-2.385-5.314-5.314-5.314S4.686,4.635,4.686,7.564H2.693c-0.244,0-0.443,0.2-0.443,0.443v9.3c0,0.243,0.199,0.442,0.443,0.442h14.615c0.243,0,0.442-0.199,0.442-0.442v-9.3C17.75,7.764,17.551,7.564,17.308,7.564 M10,3.136c2.442,0,4.43,1.986,4.43,4.428H5.571C5.571,5.122,7.558,3.136,10,3.136 M16.865,16.864H3.136V8.45h13.729V16.864z M10,10.664c-0.854,0-1.55,0.696-1.55,1.551c0,0.699,0.467,1.292,1.107,1.485v0.95c0,0.243,0.2,0.442,0.443,0.442s0.443-0.199,0.443-0.442V13.7c0.64-0.193,1.106-0.786,1.106-1.485C11.55,11.36,10.854,10.664,10,10.664 M10,12.878c-0.366,0-0.664-0.298-0.664-0.663c0-0.366,0.298-0.665,0.664-0.665c0.365,0,0.664,0.299,0.664,0.665C10.664,12.58,10.365,12.878,10,12.878"})}),Object(i.jsx)("input",{type:"password",className:"userInput",placeholder:"Password",ref:n})]})}),Object(i.jsx)("button",{className:"button",onClick:function(){return t()},children:"Log in"}),Object(i.jsxs)("div",{className:"explanation",children:["Don't have an account? ",Object(i.jsx)(o.b,{to:"/Chit-Chat/signup",children:"Sign up!"})]})]})})}),N=c(35),C=c(33),y=c(34),I="https://chit-chatdegg.herokuapp.com/graphql";function k(e,t){return'query {saveToFirestore(newUser: "{\\"userId\\":1,\\"nickname\\":\\"'.concat(e,'\\",\\"password\\":\\"').concat(t,'\\",\\"connected\\":true, \\"chatRooms\\":null, \\"currentRoom\\":null}")}')}function w(e,t){return"query {saveUserChatRoomToFirestore(userId: ".concat(e,', roomId: "').concat(t,'")}')}function M(e,t){return'query {loginUser(userNick: "'.concat(e,'", userPass: "').concat(t,'")}')}function R(e){return"query {logoutUser(userId: ".concat(e,")}")}function S(e){return'query {isRoomIDAvailable(roomId: "'.concat(e,'")}')}function F(e){return'query {createNewRoom(roomId: "'.concat(e,'")}')}function U(e,t){return"query {setUserCurrentRoom(userId: ".concat(e,', roomId: "').concat(t,'")}')}function z(e,t){return"query {joinUserToRoom(userId: ".concat(e,', roomId: "').concat(t,'")}')}function q(e){return"query {leaveCurrentRoom(userId: ".concat(e,")}")}var L=new(function(){function e(){Object(C.a)(this,e),this.authenticated=void 0,this.authenticated=!1}return Object(y.a)(e,[{key:"login",value:function(){var e=Object(m.a)(j.a.mark((function e(t,c){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=M(t,c),e.next=3,p.a.post(I,{query:n});case 3:return s=e.sent,e.abrupt("return",s.data.data.loginUser);case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=R(t),e.next=3,p.a.post(I,{query:c});case 3:return n=e.sent,e.abrupt("return",n.data.data.logoutUser);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isUserLogged",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(I,{query:"query{getUser(userId: ".concat(t,"){\n              connected\n            }}")});case 2:return c=e.sent,e.abrupt("return",c.data.data.getUser.connected);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),H=function(e){var t,c=Object.assign({},e),n=sessionStorage.getItem("localUserId"),s=null!==n?parseInt(n):null;return null!==s&&0!==s?L.isUserLogged(s).then((function(e){return t=e})):t=!1,!1===t?Object(i.jsx)(b.a,{to:"/Chit-Chat/"}):Object(i.jsx)(b.b,Object(N.a)({},c))};var T=function(e){for(var t="",c=0;c<e;c++){t+=Math.floor(10*Math.random()).toString()}return t},B=function(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(""),r=Object(h.a)(a,2),o=r[0],u=r[1],l=Object(n.useState)([]),f=Object(h.a)(l,2),N=f[0],C=f[1],y=Object(n.useState)(null),R=Object(h.a)(y,2),B=R[0],V=R[1],D=Object(n.useRef)(null),A=Object(n.useRef)(null),E=Object(n.useRef)(null),J=Object(n.useRef)(null),P=Object(n.useRef)(null),W=Object(b.g)(),G=[];function K(){return(K=Object(m.a)(j.a.mark((function e(){var t,c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(D.current&&D&&A.current&&A&&E.current&&E)){e.next=11;break}if(""===D.current.value||""===A.current.value||A.current.value!==E.current.value){e.next=10;break}return t=k(D.current.value,A.current.value),e.next=5,p.a.post(I,{query:t});case 5:c=e.sent,0!==(n=c.data.data.saveToFirestore)?(sessionStorage.setItem("localUserId",n),W.push("/Chit-Chat/createRoom")):alert("The nickname is already in use :("),e.next=11;break;case 10:A.current.value!==E.current.value?alert("The password does not match"):""===D.current.value?alert("Enter a nickname"):alert("Enter a password");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(m.a)(j.a.mark((function e(){var t,c,n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(D.current&&D&&A.current&&A)){e.next=16;break}return t=M(D.current.value,A.current.value),e.next=4,p.a.post(I,{query:t});case 4:if(c=e.sent,!c.data.data.loginUser){e.next=15;break}return e.next=9,p.a.post(I,{query:'query {getUserByName(userNick: "'.concat(D.current.value,'"){\n              userId\n          }}')});case 9:n=e.sent,s=n.data.data.getUserByName.userId,sessionStorage.setItem("localUserId",s),W.push("/Chit-Chat/createRoom"),e.next=16;break;case 15:alert("The nickname or the password is incorrect");case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(m.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=sessionStorage.getItem("localUserId"),null!==(c=null!==t?parseInt(t):null)&&L.logout(c).then((function(){sessionStorage.setItem("localUserId",""),sessionStorage.setItem("currentUser",""),W.push("/Chit-Chat/")}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return Z.apply(this,arguments)}function Z(){return(Z=Object(m.a)(j.a.mark((function e(){var t,c,n,s,a,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T(8),c=S(t),e.next=5,p.a.post(I,{query:c});case 5:if(n=e.sent,!n.data.data.isRoomIDAvailable){e.next=26;break}return s=F(t),e.next=11,p.a.post(I,{query:s});case 11:if(e.sent,a=sessionStorage.getItem("localUserId"),null===(r=null!==a?parseInt(a):null)){e.next=24;break}return o=w(r,t),e.next=18,p.a.post(I,{query:o});case 18:return e.sent,i=U(r,t),e.next=22,p.a.post(I,{query:i});case 22:e.sent,W.push("/Chit-Chat/chat");case 24:e.next=27;break;case 26:Y();case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(m.a)(j.a.mark((function e(){var t,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=sessionStorage.getItem("localUserId"),n=null!==t?parseInt(t):null,e.next=4,p.a.post(I,{query:"query{getUser(userId: ".concat(n,"){\n              currentRoom,\n              nickname\n            }}")});case 4:a=e.sent,u(a.data.data.getUser.currentRoom),s(a.data.data.getUser.nickname),sessionStorage.setItem("currentRoom",o),sessionStorage.setItem("currentUser",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(m.a)(j.a.mark((function e(){var t,c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J.current||!J){e.next=13;break}if(""===J.current.value||8!==J.current.value.length){e.next=12;break}if(t=sessionStorage.getItem("localUserId"),null===(c=null!==t?parseInt(t):null)){e.next=10;break}return n=z(c,J.current.value),e.next=8,p.a.post(I,{query:n});case 8:e.sent.data.data.joinUserToRoom?W.push("/Chit-Chat/chat"):alert("The room does not exist");case 10:e.next=13;break;case 12:alert("Enter a valid room Id (Only number and 8 digits)");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(m.a)(j.a.mark((function e(){var t,c,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=sessionStorage.getItem("localUserId"),null===(c=null!==t?parseInt(t):null)){e.next=11;break}return n=q(c),e.next=6,p.a.post(I,{query:n});case 6:e.sent,sessionStorage.setItem("currentRoom",""),W.push("/Chit-Chat/createRoom"),B.close(),G.length=0;case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P&&P.current&&""!==P.current.value&&(t={roomId:sessionStorage.getItem("currentRoom"),messageId:"1",user:sessionStorage.getItem("currentUser"),message:P.current.value,source:"external"},B.send(JSON.stringify(t)),P.current.value="");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return null!==B&&(B.onmessage=function(e){var t=sessionStorage.getItem("currentRoom"),c=sessionStorage.getItem("currentUser"),n=JSON.parse(e.data);null!==t&&null!==c&&n.roomId===t&&(n.user!==c&&"Chit-Chat"!==n.user||(n.source="local"),G=[].concat(Object(d.a)(G),[n]),C([].concat(Object(d.a)(N),[n])))}),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(b.d,{children:[Object(i.jsx)(b.b,{exact:!0,path:"/Chit-Chat/",children:Object(i.jsx)(g,{logInFunc:function(){return Q.apply(this,arguments)},usernameRef:D,passRef:A})}),Object(i.jsx)(b.b,{path:"/Chit-Chat/signup",children:Object(i.jsx)(O,{signUpFunc:function(){return K.apply(this,arguments)},usernameRef:D,passRef:A,passAgainRef:E})}),Object(i.jsx)(H,{path:"/Chit-Chat/createRoom",children:Object(i.jsx)(x,{createRoomFunc:Y,joinRoomFunc:function(){return _.apply(this,arguments)},logOutFunc:function(){return X.apply(this,arguments)},roomIDRef:J,connectToWebsocketFunc:function(){var e=new WebSocket("ws://localhost:9000");V(e)}})}),Object(i.jsx)(H,{path:"/Chit-Chat/chat",children:Object(i.jsx)(v,{username:c,roomId:o,sendMessage:function(){return te.apply(this,arguments)},currentDataFunc:function(){return $.apply(this,arguments)},leaveRoomFunc:function(){return ee.apply(this,arguments)},messageRef:P,messages:N})})]})})};c(71);var V=function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{id:"background",children:Object(i.jsx)(u,{})}),Object(i.jsx)("div",{id:"content",children:Object(i.jsx)(o.a,{children:Object(i.jsx)(B,{})})})]})},D=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,73)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(V,{})}),document.getElementById("root")),D()}},[[72,1,2]]]);
//# sourceMappingURL=main.e4d585b6.chunk.js.map